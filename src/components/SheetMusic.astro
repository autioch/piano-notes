---
import Config from "../components/Config.astro";
import Bar from "../components/Bar.astro";
import type { SheetMusic } from "../types/piano";

type Props = {
  sheetMusic: SheetMusic;
};

const { sheetMusic } = Astro.props;
---

<svg
  width="600"
  height="400"
  viewBox="0 0 600 400"
  xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(0,10)">
    <Config sheetMusic={sheetMusic} />
    {
      sheetMusic.bars.map((bar, i) => (
        <g
          transform={`translate(${i * 85 + 40 - (i > 2 ? 295 : 0)},${i > 2 ? 60 : 0})`}
        >
          <Bar bar={bar} />
        </g>
      ))
    }
  </g>
</svg>
